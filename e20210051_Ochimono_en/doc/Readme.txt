===============================================================================

　Ochimono-NT / version $version$
　　　　　　　　　　　　　　　　　　　　　　　　　　　　(C) 2021 soleil.taruto

===============================================================================


■ゲームの概要

　ぷよぷよをオマージュした落ちものゲームです。
　パズル対戦のみ。ストーリーはありません。

　１人プレイ（対ＣＰＵ戦）
　２人プレイ（人間同士の対戦）
　実験的な実装ですが「ネットワーク対戦」に対応しています。

　ゲームパッド対応


■注意

　当ゲームはインターネットを通じてデータのやりとりを行います。
　通信データについては後述します。


■動作環境

　Windows 10 Pro または Windows 10 Home


■インストール方法

　アーカイブの中身をローカルディスク上の任意の場所にコピーして下さい。


■アンインストール方法

　レジストリなどは一切使っていません。
　ファイルを削除するだけでアンインストールできます。


■起動方法

　Ochimono-NT.exe を実行して下さい。


■操作方法

　●Ｐ１

　　カーソルキー　　...　上下左右
　　Ｚ　　　　　　　...　左回転（決定）
　　Ｘ　　　　　　　...　右回転（キャンセル）
　　スペースキー　　...　ポーズ

　●Ｐ２

　　テンキー１　　　...　左
　　テンキー２　　　...　下
　　テンキー３　　　...　右
　　テンキー４　　　...　左回転（決定）
　　テンキー５　　　...　上
　　テンキー６　　　...　右回転（キャンセル）


　★キー配置は「タイトルメニュー／設定／プレイヤー１(２)のキー割り当て」から変更できます。

　★キーボードによっては同時複数キー押下を検出できない場合があります。
　　２人プレイの場合はゲームパッドの使用を推奨します。

　★ゲームパッドのボタン配置は「タイトルメニュー／設定／ＰＡＤ１(２)のボタンの割り当て」から変更できます。

　★タイトル画面・ポーズ画面はマウス操作に対応しています。


■パズル対戦について

　●画面構成（フィールド配置）

　　１人プレイの場合　　　　...　左＝プレイヤー　　右＝ＣＰＵ
　　２人プレイの場合　　　　...　左＝プレイヤー１　右＝プレイヤー２
　　ネットワーク対戦の場合　...　左＝サーバー側　　右＝クライアント側


　●画面構成（パーツ配置）

　　フィールド＝ブロックを積み上げる領域
　　フィールドの右上の領域＝次のブロックと次の次のブロック
　　フィールドの左上の数値＝蓄積されている邪魔ブロック
　　フィールドの右下の数値＝スコア


　●積み上がった時の挙動

　　フィールドの上部の見えない部分に２段空間があります。
　　その左から３列目に「次のブロック」を縦に配置しようとしますが、そこにブロックが存在したら負けとなります。

　　但し、フィールド上まだ空間があればランダムにブロックを飛ばしてくれます。（ボーナス・ワープ）
　　この機能はネットワーク対戦では無効になります。


■ネットワーク対戦

　●基本情報

　　通信プロトコル：
　　　IPv4 / UDP


　●チュートリアル

　　ここではＡさんとＢさんがネットワーク対戦を行うこととします。

　　▼準備

　　　ＡさんＢさんが起動するゲームは「同じビルド日時」である必要があります。★重要★
　　　ビルド日時はウィンドウタイトルに表示されます。
　　　（ウィンドウタイトル "OCHIMONO-NT / Built : Xxx-99-9999-99-99-99" の "Xxx-99-9999-99-99-99" の部分）

　　　ＡさんＢさん共に（待ち受け可能な）任意のＵＤＰポートを解放する必要があります。★重要★
　　　ここではＡさんはＵＤＰポート 50001 番を、ＢさんはＵＤＰポート 50002 番を解放したとします。

　　　Ａさんがサーバー側、Ｂさんがクライアント側とします。
　　　サーバー・クライアントになるための要件の違いは特にありませんが、
　　　サーバー側のＩＰアドレスはクライアント側・観戦者側に伝えておく必要があります。

　　　ＡさんのＩＰアドレスは 192.168.222.101 ＢさんのＩＰアドレスは 192.168.222.102 とします。

　　　★ポート番号、ＩＰアドレスは環境によって異なります。
　　　　適宜読み替えて下さい。


　　▼手順

　　　1. ＡさんＢさん共にゲームを起動します。

　　　2. Ａさんは次のとおり操作します。

　　　　「ネットワーク対戦」を選択する。
　　　　「サーバーを立てる」を選択する。
　　　　「待ち受けポート番号の変更」を選択し 50001 を入力してエンターを押す。

　　　　★任意でニックネームの変更、観戦の許可・不許可を変更して下さい。
　　　　　変更する必要は無いのでここでは飛ばします。

　　　　「この設定で通信する」を選択する。

　　　　★任意で背景を変更して下さい。
　　　　　変更する必要は無いのでここでは飛ばします。

　　　　「待ち受け開始」を選択する。

　　　3. Ｂさんは次のとおり操作します。（Ａさんの操作より先行しても問題ありません）

　　　　「ネットワーク対戦」を選択する。
　　　　「ＩＰアドレスとポート番号を指定してサーバーに接続する」を選択する。

　　　　設定スロット一覧が表示されます。任意のスロットを選択して下さい。

　　　　「接続先ＩＰアドレスの変更」を選択して 192.168.222.101 を入力してエンターを押す。（ＢＳで１文字削る。ＤＥＬで全て削る）
　　　　「接続先ポート番号の変更」を選択して 50001 を入力してエンターを押す。
　　　　「こちらのポート番号の変更」を選択して 50002 を入力してエンターを押す。

　　　　★任意でニックネームを変更して下さい。
　　　　　変更する必要は無いのでここでは飛ばします。

　　　　「この設定で通信する」を選択する。
　　　　「接続開始」を選択する。（よく分からない場合は「通常の対戦」の方を選択して下さい）

　　　3. Ａさん側の画面に
　　　　ＸＸＸさんがあなたとの対戦を希望しています。
　　　　と表示されるので決定キー（決定ボタン）を押して下さい。
　　　　数秒で対戦が始まります。

　　　　★Ｂさんが接続開始を選択すれば、ほぼ一瞬でＡさんの画面も切り替わります。
　　　　　いつまで経ってもＡさんの画面が切り替わらない場合、通信に問題が発生していることが考えられます。


■開発の経緯

　１０年前にパズルゲームの制作にＰＧとして参加させていただいたことがありまして、
　その時実装したネットワーク対戦機能だけが諸般の事情で公開に至らずお蔵入りになっていました。
　今更感を覚えつつも折角作ったんだからという思いが勝って、関連する機能だけ抜き出したものを公開することにしました。


■通信データについて

　●送信される情報内容

　　送信先：
　　　ネットワーク対戦の相手
　　　ネットワーク対戦の観戦者（サーバー側のみ送信を行う）

　　通信プロトコル：
　　　IPv4 / UDP

　　通信内容：
　　　パズル対戦前：
　　　　お互いのパズル設定・戦場の設定
　　　　同期情報（お互いの識別番号）

　　　パズル対戦中：
　　　　お互いの操作内容
　　　　同期情報（お互いの識別番号）

　●取り扱い目的

　　ネットワーク対戦のため


■素材配布元（敬称略）

　効果音ラボ
　https://soundeffect-lab.info/

　ぱくたそ
　https://www.pakutaso.com/

　MusMus
　https://musmus.main.jp/

　run
　https://www.pixiv.net/artworks/14949881


■このゲームの製作者

　soleil.taruto

　URL:
　　http://ornithopter.ccsp.mydns.jp/recollections/Ochimono

　MAIL:
　　soleil.taruto@gmail.com

